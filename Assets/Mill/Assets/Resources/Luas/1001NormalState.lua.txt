UnityEngine = CS.UnityEngine
Vector3 = UnityEngine.Vector3
Camera = UnityEngine.Camera
CharacterCtrlBase = CS.CharacterCtrlBase
Debug = CS.UnityEngine.Debug
Quaternion = CS.UnityEngine.Quaternion;
Time = CS.UnityEngine.Time;
RolePlayer = CS.RolePlayer

local mc = nil

function OnEnter()
   mc = self.owner:GetComponent(typeof(RolePlayer))
end


function OnUpdate()
   local dir = CS.JoySticker.Instance.dir
   local moveDir = Camera.main.transform:TransformDirection(Vector3(dir.x,0,dir.y))
   moveDir.y = 0
   self.cc:SimpleMove(moveDir * mc.speed)
   if(moveDir ~= Vector3.zero) then
      self.cc.transform.rotation = Quaternion.Slerp(self.cc.transform.rotation, Quaternion.LookRotation(moveDir), mc.rotationSpeed * Time.fixedDeltaTime);
   end
   self.ani:SetFloat("speed", dir.magnitude * mc.speed);
end

 